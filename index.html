<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile POS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #f3f4f6; font-family: sans-serif; }
        .product-card { transition: transform 0.1s; }
        .product-card:active { transform: scale(0.95); }
    </style>
</head>
<body class="max-w-md mx-auto min-h-screen pb-20">

    <header class="bg-blue-600 text-white p-4 sticky top-0 z-10 shadow-md">
        <h1 class="text-xl font-bold mb-3">Mobile POS</h1>
        <input type="text" id="searchInput" onkeyup="filterProducts()" 
               placeholder="ðŸ” Search products by name..." 
               class="w-full p-2 rounded-lg text-black outline-none focus:ring-2 focus:ring-blue-300">
    </header>

    <section class="p-4 bg-white border-b">
        <h2 class="text-sm font-semibold text-gray-500 uppercase mb-2">Add New Product</h2>
        <div class="flex gap-2">
            <input type="text" id="newName" placeholder="Product Name" class="flex-1 border p-2 rounded">
            <input type="number" id="newPrice" placeholder="$ Price" class="w-24 border p-2 rounded">
            <button onclick="addProduct()" class="bg-green-500 text-white px-4 py-2 rounded font-bold">+</button>
        </div>
    </section>

    <main class="p-4" id="productList">
        </main>

    <footer class="fixed bottom-0 w-full max-w-md bg-white border-t p-4 flex justify-between items-center shadow-lg">
        <div>
            <p class="text-gray-500 text-xs">Items: <span id="itemCount">0</span></p>
            <p class="text-xl font-bold text-blue-600">Total: $<span id="totalPrice">0.00</span></p>
        </div>
        <button class="bg-blue-600 text-white px-6 py-2 rounded-full font-bold shadow-md active:bg-blue-700">
            CHECKOUT
        </button>
    </footer>

    <script>
        // Load data from LocalStorage or use defaults
        let products = JSON.parse(localStorage.getItem('pos_products')) || [
            { id: 1, name: "Espresso", price: 3.50 },
            { id: 2, name: "Iced Latte", price: 4.25 },
            { id: 3, name: "Croissant", price: 2.75 }
        ];

        function renderProducts(data = products) {
            const list = document.getElementById('productList');
            list.innerHTML = '';
            
            data.forEach(product => {
                const div = document.createElement('div');
                div.className = "product-card bg-white p-4 rounded-xl shadow-sm mb-3 flex justify-between items-center border border-gray-100";
                div.innerHTML = `
                    <div>
                        <h3 class="font-bold text-gray-800">${product.name}</h3>
                        <p class="text-blue-500 font-semibold">$${product.price.toFixed(2)}</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="deleteProduct(${product.id})" class="text-red-400 text-xs mr-2">Delete</button>
                        <button onclick="addToCart(${product.price})" class="bg-gray-100 text-blue-600 w-10 h-10 rounded-full font-bold border border-blue-100">Add</button>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function addProduct() {
            const name = document.getElementById('newName').value;
            const price = parseFloat(document.getElementById('newPrice').value);

            if (name && price) {
                const newProd = { id: Date.now(), name, price };
                products.push(newProd);
                saveAndRender();
                document.getElementById('newName').value = '';
                document.getElementById('newPrice').value = '';
            } else {
                alert("Please enter both name and price!");
            }
        }

        function filterProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = products.filter(p => p.name.toLowerCase().includes(query));
            renderProducts(filtered);
        }

        function deleteProduct(id) {
            products = products.filter(p => p.id !== id);
            saveAndRender();
        }

        function saveAndRender() {
            localStorage.setItem('pos_products', JSON.stringify(products));
            renderProducts();
        }

        // Cart Logic (Simplistic for UI Demo)
        let total = 0;
        let count = 0;
        function addToCart(price) {
            total += price;
            count++;
            document.getElementById('totalPrice').innerText = total.toFixed(2);
            document.getElementById('itemCount').innerText = count;
        }

        // Initial Load
        renderProducts();
    </script>
</body>
</html>
